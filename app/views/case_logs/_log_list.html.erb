<figure class="app-figure">
  <figcaption id="<%= title.dasherize %>" class="app-figure__caption">
    <b><%= case_logs.count %></b> <%= title.downcase %>
  </figcaption>
  <div class="app-table-group" tabindex="0" aria-labelledby="<%= title.dasherize %>">
    <table class="govuk-table">
      <thead class="govuk-table__head">
        <tr class="govuk-table__row">
          <th class="govuk-table__header" scope="col">Log</th>
          <th class="govuk-table__header" scope="col">Tenant</th>
          <th class="govuk-table__header" scope="col">Property</th>
          <th class="govuk-table__header" scope="col">Tenacy starts</th>
          <th class="govuk-table__header" scope="col">Log created</th>
          <th class="govuk-table__header" scope="col">Completed</th>
        </tr>
      </thead>
      <tbody class="govuk-table__body">
        <% case_logs.map do |log| %>
        <tr class="govuk-table__row">
          <th class="govuk-table__header" scope="row">
            <%= govuk_link_to log.id, case_log_path(log) %>
          </th>
          <td class="govuk-table__cell app-!-font-tabular">
            <%= log.tenant_code? ? log.tenant_code : '–' %>
          </td>
          <td class="govuk-table__cell app-!-font-tabular">
            <%= log.propcode? ? log.propcode : '–' %>
          </td>
          <td class="govuk-table__cell">
            <%= log.startdate.present? ? log.startdate.to_formatted_s(:govuk_date) : '–' %>
          </td>
          <td class="govuk-table__cell">
            <%= log.created_at.to_formatted_s(:govuk_date) %>
          </td>
          <td class="govuk-table__cell">
            <%= govuk_tag(
              colour: log.status == 'completed' ? 'blue' : 'grey',
              text: log.status.humanize
            ) %>
          </td>
        </tr>
        <% end %>
      </tbody>
    </table>
  </div>
</figure>
