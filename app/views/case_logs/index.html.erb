<% item_label = @pagy.count > 1 ? "logs" : "log" %>

<% if @searched.present? %>
  <% title = "Logs (search results for ‘#{@searched}’#{@pagy.last > 1 ? ", page #{@pagy.page} of #{@pagy.last}" : ''}) - Submit social housing and sales data (CORE) - GOV.UK" %>
<% else %>
  <% title = "Logs #{@pagy.last > 1 ? "(page #{@pagy.page} of #{@pagy.last}) " : ''}- Submit social housing and sales data (CORE) - GOV.UK" %>
<% end %>

<% content_for :title, title %>

<% content_for :tab_title do %>
  <%= "Logs" %>
<% end %>

<div class="app-filter-layout" data-controller="filter-layout">
  <div class="govuk-button-group app-filter-toggle">
    <%= govuk_button_to "Create a new lettings log", case_logs_path %>
    <%#= govuk_link_to "Upload logs", bulk_upload_case_logs_path %>
  </div>

  <%= render partial: "log_filters" %>
  <div class="app-filter-layout__content">
    <%= render SearchComponent.new(current_user:, search_label: "Search by log ID, tenant code, property reference or postcode", value: @searched) %>
    <hr class="govuk-section-break govuk-section-break--visible govuk-section-break--m">
    <%= render partial: "log_list", locals: { case_logs: @case_logs, title: "Logs", pagy: @pagy, searched: @searched, item_label:, total_count: @total_count } %>
    <%== render partial: "pagy/nav", locals: { pagy: @pagy, item_name: "logs" } %>
  </div>
</div>
