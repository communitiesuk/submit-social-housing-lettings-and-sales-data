<% item_label = @pagy.count > 1 ? "organisations" : "organisation" %>
<% if @searched.present? %>
  <% title = "Organisations (#{@pagy.count} #{item_label} matching ‘#{@searched}’ of #{@total_count} total organisations)" %>
<% else %>
  <% title = "Organisations" %>
<% end %>

<h1 class="govuk-heading-l">
  <% if current_user.support? && request.path == "/organisations" %>
    Organisations
  <% end %>
  <% if current_user.support? && request.path != "/organisations" %>
    <span class="govuk-caption-l"><%= @organisation.name %></span>
    <h1 class="govuk-heading-l">Organisations</h1>
  <% end %>
</h1>

<% items = tab_items(current_user) %>

<h2 class="govuk-visually-hidden">Organisations</h2>

<%= render SearchComponent.new(current_user:, search_label: "Search by organisation name", value: @searched) %>

<hr class="govuk-section-break govuk-section-break--visible govuk-section-break--m">

<%= render partial: "organisation_list", locals: { organisations: @organisations, title: "Organisations", pagy: @pagy, searched: @searched, item_label:, total_count: @total_count } %>
<%== render partial: "pagy/nav", locals: { pagy: @pagy, item_name: "organisations" } %>
